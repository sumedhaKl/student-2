<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Your Own Adventure: Fantasial Darkness</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
    </style>
</head>
<body>
    <h1>Choose Your Own Adventure: Fantasial Darkness</h1>

    <label for="character">Select a character:</label>
    <select id="character">
        <option value="adam">Adam</option>
        <option value="sorceresse">Sorceresse</option>
        <option value="hasuro">Hasuro</option>
        <option value="sakuria">Sakuria</option>
    </select>

    <br>

    <label for="personality">Enter the character's personality:</label>
    <input type="text" id="personality" placeholder="e.g., Adventurous">

    <br>

    <button onclick="startAdventure()">Start Adventure</button>

    <br>

    <p id="story"></p>
    <div id="choices"></div>

    <script defer>
        let storyText = "";
        let currentScene = "start";
        let selectedCharacter = "";
        let enteredPersonality = "";

        function startAdventure() {
            selectedCharacter = document.getElementById("character").value;
            enteredPersonality = document.getElementById("personality").value;

            if (!enteredPersonality) {
                alert("Please enter the character's personality.");
                return;
            }

            currentScene = "start";
            generateStory();
        }

        function generateStory() {
            storyText = "";
            document.getElementById("choices").innerHTML = "";

            if (currentScene === "start") {
                storyText = `${selectedCharacter} is a ${enteredPersonality} person who finds themselves at a crossroads.`;
                displayChoices(["Go to the inn (Sorceresse)", "Wait inside the inn (Adam)", "Hide out in the forest (Hasuro)", "Stay inside the palace (Sakuria)"]);
            } else if (currentScene === "inn") {
                storyText = `In the inn, ${selectedCharacter} decides to take a break.`;
                displayChoices(["Order a meal", "Chat with other travelers", "Plan the next adventure"]);
            } else if (currentScene === "orderMeal") {
                storyText = `${selectedCharacter} orders a delicious meal and enjoys a moment of relaxation.`;
                displayChoices(["Explore the town further", "Rest in the inn"]);
            } else if (currentScene === "chatWithTravelers") {
                storyText = `${selectedCharacter} engages in conversations with other travelers, gaining valuable information.`;
                displayChoices(["Embark on a new quest", "Return to the inn"]);
            } else if (currentScene === "planNextAdventure") {
                storyText = `${selectedCharacter} plans the next adventure, considering various options.`;
                displayChoices(["Head to the mysterious forest", "Visit the bustling city", "Explore the hidden beach"]);
            } else if (currentScene === "outsideTheInn") {
                storyText = `${selectedCharacter} steps outside the inn, ready for a new journey.`;
                displayChoices(["Go to the mysterious forest", "Visit the bustling city", "Explore the hidden beach"]);
            } else if (currentScene === "forest") {
                storyText = `As ${selectedCharacter} ventures into the forest, they encounter a magical creature.`;
                displayChoices(["Befriend the creature", "Continue deeper into the forest"]);
            } else if (currentScene === "beach") {
                storyText = `${selectedCharacter} decides to relax on the sunny beach.`;
                displayChoices(["Build a sandcastle", "Take a swim"]);
            } else if (currentScene === "palace") {
                // Add palace scene logic here if needed
            }

            document.getElementById("story").innerText = storyText;
        }

        function displayChoices(choices) {
            for (let i = 0; i < choices.length; i++) {
                const choiceBtn = document.createElement("button");
                choiceBtn.innerText = choices[i];
                choiceBtn.onclick = function () {
                    handleChoice(choices[i]);
                };
                document.getElementById("choices").appendChild(choiceBtn);
            }
        }

        function handleChoice(choice) {
            if (currentScene === "start") {
                if (choice === "Go to the inn (Sorceresse)") {
                    currentScene = "inn";
                } else if (choice === "Wait inside the inn (Adam)") {
                    currentScene = "insideTheInn";
                } else if (choice === "Hide out in the forest (Hasuro)") {
                    currentScene = "outsideTheInn";
                } else if (choice === "Stay inside the palace (Sakuria)") {
                    currentScene = "palace";
                }
            } else if (currentScene === "inn") {
                if (choice === "Order a meal") {
                    currentScene = "orderMeal";
                } else if (choice === "Chat with other travelers") {
                    currentScene = "chatWithTravelers";
                } else if (choice === "Plan the next adventure") {
                    currentScene = "planNextAdventure";
                }
            } else if (currentScene === "orderMeal" || currentScene === "chatWithTravelers" || currentScene === "planNextAdventure") {
                if (choice === "Explore the town further") {
                    currentScene = "outsideTheInn";
                } else if (choice === "Rest in the inn") {
                    currentScene = "inn";
                }
            } else if (currentScene === "outsideTheInn") {
                if (choice === "Go to the mysterious forest") {
                    currentScene = "forest";
                } else if (choice === "Visit the bustling city") {
                    currentScene = "city";
                } else if (choice === "Explore the hidden beach") {
                    currentScene = "beach";
                }
            } else if (currentScene === "forest") {
                if (choice === "Befriend the creature") {
                    currentScene = "befriendCreature";
                } else if (choice === "Continue deeper into the forest") {
                    currentScene = "deeperForest";
                }
            } else if (currentScene === "beach") {
                if (choice === "Build a sandcastle") {
                    currentScene = "buildSandcastle";
                } else if (choice === "Take a swim") {
                    currentScene = "takeASwim";
                }
            }

            generateStory();
        }

        function displayEnd() {
            const endMessage = document.createElement("p");
            endMessage.innerText = "The adventure comes to an end. Thanks for playing!";
            document.getElementById("choices").appendChild(endMessage);
        }

        // Add end messages for specific scenes
        if (currentScene === "buildSandcastle" || currentScene === "takeASwim" || currentScene === "deeperForest" || currentScene === "enterDoor" || currentScene === "exploreCity" || currentScene === "talkToCharacters") {
            displayEnd();
        }
    </script>
</body>
</html>