<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Your Own Adventure: Fantasial Darkness</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
    </style>
</head>
<body>
    <h1>Choose Your Own Adventure: Fantasial Darkness</h1>

    <label for="character">Select a character:</label>
    <select id="character">
        <option value="adam">Adam</option>
        <option value="sorceresse">Sorceresse</option>
        <option value="hasuro">Hasuro</option>
        <option value="sakuria">Sakuria</option>
    </select>

    <br>

    <label for="personality">Enter the character's personality:</label>
    <input type="text" id="personality" placeholder="e.g., Adventurous">

    <br>

    <button onclick="startAdventure()">Start Adventure</button>

    <br>

    <p id="story"></p>
    <div id="choices"></div>

    <script defer>
        let storyText = "";
        let currentScene = "start";
        let selectedCharacter = "";
        let enteredPersonality = "";
    
        function startAdventure() {
            selectedCharacter = document.getElementById("character").value;
            enteredPersonality = document.getElementById("personality").value;
    
            if (!enteredPersonality) {
                alert("Please enter the character's personality.");
                return;
            }
    
            currentScene = "start";
            generateStory();
        }
    
        function generateStory(index) {
            storyText = "";
            document.getElementById("choices").innerHTML = "";
    
            const choices = getChoicesForScene(currentScene);
    
            if (currentScene === "start") {
                storyText = `${selectedCharacter} is a ${enteredPersonality} person who finds themselves at a crossroads.`;
            } else {
                storyText = `${selectedCharacter} ${(index !== undefined && choices[index]) ? choices[index].text : ''}`;
            }
    
            if (index !== undefined && choices[index].isEnd) {
                displayEnd();
                return;
            }
    
            displayChoices(choices);
            document.getElementById("story").innerText = storyText;
        }
    
        function getChoicesForScene(scene) {
            switch (scene) {
                case "start":
                    return [
                        { text: "Explore the mysterious forest", scene: "forest" },
                        { text: "Visit the bustling city", scene: "city" },
                        { text: "Relax on the sunny beach", scene: "beach" }
                    ];
                case "forest":
                    return [
                        { text: "Befriend the creature", scene: "befriendCreature" },
                        { text: "Continue deeper into the forest", scene: "deeperForest" }
                    ];
                case "city":
                    return [
                        { text: "Enter the mysterious door", scene: "enterDoor" },
                        { text: "Explore other parts of the city", scene: "exploreCity" }
                    ];
                case "beach":
                    return [
                        { text: "Build a sandcastle", scene: "buildSandcastle" },
                        { text: "Take a swim", scene: "takeASwim" }
                    ];
                case "befriendCreature":
                    return [
                        { text: "Follow the guide deeper into the forest", scene: "followGuideDeeper" },
                        { text: "Thank the guide and explore on your own", scene: "thankGuideAndExplore" }
                    ];
                case "deeperForest":
                    return [
                        { text: "Investigate the ancient ruin", scene: "investigateAncientRuin" },
                        { text: "Return to the forest entrance", scene: "returnToForestEntrance" }
                    ];
                case "enterDoor":
                    return [
                        { text: "Meet magical creatures", scene: "meetMagicalCreatures" },
                        { text: "Seek guidance from a wise wizard", scene: "seekGuidanceFromWizard" }
                    ];
                case "exploreCity":
                    return [
                        { text: "Visit a bustling marketplace", scene: "visitBustlingMarketplace" },
                        { text: "Attend a mysterious carnival", scene: "attendMysteriousCarnival" }
                    ];
                case "buildSandcastle":
                    return [
                        { text: "Decorate the sandcastle with seashells", scene: "decorateWithSeashells" },
                        { text: "Challenge someone to a sandcastle-building contest", scene: "challengeSandcastleContest" }
                    ];
                case "takeASwim":
                    return [
                        { text: "Dive underwater to explore", scene: "diveUnderwaterToExplore" },
                        { text: "Sunbathe on the beach", scene: "sunbatheOnBeach" }
                    ];
                // Add more cases for other scenes as needed
                default:
                    return [];
            }
        }
    
        function displayChoices(choices) {
            for (let i = 0; i < choices.length; i++) {
                const choiceBtn = document.createElement("button");
                choiceBtn.innerText = choices[i].text;
                choiceBtn.onclick = function () {
                    handleChoice(i);
                };
                document.getElementById("choices").appendChild(choiceBtn);
            }
        }
    
        function handleChoice(index) {
            const choices = getChoicesForScene(currentScene);
    
            if (currentScene !== "start") {
                currentScene = choices[index].scene;
            }
    
            generateStory(index);
        }
    
        function displayEnd() {
            const endMessage = document.createElement("p");
            endMessage.innerText = "The adventure comes to an end. Thanks for playing!";
            document.getElementById("choices").appendChild(endMessage);
        }
    </script>            
</body>
</html>